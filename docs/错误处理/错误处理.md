# 错误处理

## 固件加载报错

```text

[    6.729846] bluetooth hci0: Direct firmware load for rtl_bt/rtl8723d_fw.bin failed with error -2

```

解决方法：

```shell
sudo apt update
sudo apt install firmware-realtek

```

![](./images/47552615913800.png)

## rk3288-crypto 报错

```text
[    7.374506] rk3288-crypto: probe of ff8b8000.crypto failed with error -16

```

解决措施：

临时禁用

```text
&crypto1 {
	status = "disabled";
};

```

## typec_fusb302 报错

```text
[root@2g ~]# dmesg |grep -i error
[    1.794909] typec_fusb302: probe of 8-0022 failed with error -2
```

在 Linux 内核中，驱动 probe() 返回 -2 通常意味着： I2C 设备未响应（即在地址 0x22 上没有 ACK） 或 依赖的资源（如
GPIO、regulator）不存在或解析失败 而你的 DTS 中使用了两个自定义 GPIO： int-n-gpios = <&gpio1 RK_PA2
...>
vbus-5v-gpios = <&gpio0 RK_PA1 ...>

修改dts

```text
// kdev: i2c8 for usb, okay
&i2c8 {
	status = "okay";
	i2c-scl-rising-time-ns = <345>;
	i2c-scl-falling-time-ns = <11>;
	clock-frequency = <100000>;

	fusb0: fusb30x@22 {
		compatible = "fairchild,fusb302";
		reg = <0x22>;
		pinctrl-names = "default";
		pinctrl-0 = <&fusb0_int>;

		interrupt-parent = <&gpio1>;
		interrupts = <RK_PA2 IRQ_TYPE_LEVEL_LOW>;  // INT# 低有效！

		// int-n-gpios = <&gpio1 RK_PA2 GPIO_ACTIVE_HIGH>;
		// vbus-5v-gpios = <&gpio0 RK_PA1 GPIO_ACTIVE_LOW>;
		status = "okay";
	};
};

```

## rockchip-typec-phy 报错

```text
[    5.998564] Error: Driver 'rockchip-typec-phy' is already registered, aborting...

```

设备树中启用了两个 Type-C PHY！ 从你提供的 DTS 中可以看到：

```text
/* TYPEC0 */
&tcphy0 {
status = "okay";
extcon = <&fusb0>;
};

/* TYPEC1 */
&tcphy1 {
status = "okay";   // ← 这里也启用了！
};
```

1. tcphy0（地址 ff7c0000）已启用，用于连接 FUSB302（Type-C 控制器）
2. tcphy1（地址 ff800000）也被设为 "okay"，但 没有配置 extcon、USB 或 DP 端点

这会导致内核在初始化 tcphy1 时，再次尝试注册同一个 rockchip-typec-phy 驱动，从而触发错误。


